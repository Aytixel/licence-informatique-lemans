class Scroll{__orientation;__element;__last_position={x:0,y:0};__deceleration=.975;__hold=!1;__last_hold=!1;__running=!1;constructor(e,t=0){this.__orientation=t,this.__element=e,this.__element.style.overflow="hidden",e.addEventListener("wheel",this.__wheel,{passive:!0}),e.addEventListener("pointerdown",this.__pointer_start)}__wheel=e=>{this.__element.style.scrollBehavior="auto",this.__element.style.scrollSnapType="none",this.apply_scroll(e.deltaX,e.deltaY,e.shiftKey)};__pointer_start=e=>{this.__hold=!0,this.__last_position.x=e.clientX,this.__last_position.y=e.clientY,this.__element.style.scrollBehavior="auto",this.__element.style.scrollSnapType="none",this.__element.addEventListener("pointermove",this.__pointer_move,{passive:!0}),this.__element.addEventListener("pointerup",this.__pointer_end),this.__element.addEventListener("pointerleave",this.__pointer_end),this.__element.addEventListener("lostpointercapture",this.__pointer_end)};__pointer_move=e=>{window.requestAnimationFrame((()=>{this.apply_scroll(this.__last_position.x-e.clientX,this.__last_position.y-e.clientY,!1,!1),this.__last_position.x=e.clientX,this.__last_position.y=e.clientY}))};__pointer_end=()=>{this.__element.removeEventListener("pointermove",this.__pointer_move,{passive:!0}),this.__element.removeEventListener("pointerup",this.__pointer_move),this.__element.removeEventListener("pointerleave",this.__pointer_end),this.__element.removeEventListener("lostpointercapture",this.__pointer_end),this.__hold=!1,this.__reset_scroll_style()};apply_scroll(e,t,_=!1,i=!0){if(i&&(this.__hold=!1,this.__running=!1),this.__last_hold&&!this.__hold){const _=Math.min(Math.max(Math.log2(window.innerHeight/window.innerWidth),1),2);e*=_,t*=_}if(!this.__hold){const _=Math.abs(e)<1,i=Math.abs(t)<1;e*=this.__deceleration,t*=this.__deceleration,_&&(e=0),i&&(t=0),_&&i&&(this.__running=!1)}!this.__running&&this.__hold&&(this.__running=!0),window.requestAnimationFrame((()=>{1==this.__orientation&&(i&&(this.__element.scrollLeft+=t),this.__element.scrollLeft+=e),2==this.__orientation&&(this.__element.scrollTop+=t,i&&(this.__element.scrollTop+=e)),3==this.__orientation&&(i&&_?(this.__element.scrollTop+=e,this.__element.scrollLeft+=t):(this.__element.scrollTop+=t,this.__element.scrollLeft+=e)),this.__running&&!this.__hold&&this.apply_scroll(e,t,_,i),i||this.__reset_scroll_style(),this.__last_hold=this.__hold}))}__reset_scroll_style=debounce((()=>{this.__hold||(this.__element.style.scrollBehavior="",this.__element.style.scrollSnapType="")}),50)}
